window.yii.easyuiLogin=function(a){return{isActive:!1,init:function(){window.localStorage.removeItem("token");a("#login-dialog").dialog({title:yii.easyuiLogin.dialogTitle,width:yii.easyuiLogin.dialogWidth,height:yii.easyuiLogin.dialogHeight,content:yii.easyuiLogin.content,closable:!1,minimizable:!1,maximizable:!1,collapsible:!1,draggable:!1,resizable:!1,iconCls:"icon-lock",toolbar:yii.easyuiLogin.header,buttons:"#login-btn"});var d=a(yii.easyuiLogin.usernameSelector),e=a("#loginform-password"),b=
a("#login-form");d.textbox({prompt:"Username",required:1,width:yii.easyuiLogin.textboxWidth}).textbox("textbox").bind("keydown",function(a){13===a.keyCode&&b.form("submit");a.stopPropagation()});e.passwordbox({prompt:"Password",required:1,width:yii.easyuiLogin.textboxWidth}).passwordbox("textbox").bind("keydown",function(a){13===a.keyCode&&b.form("submit");a.stopPropagation()});b.form({url:yii.easyuiLogin.url,novalidate:!0,onSubmit:function(){a(this).form("enableValidation");if(!a(this).form("validate"))return!1},
success:function(c){try{c=eval("("+c+")");if(c.data){var b=[];a.each(c.data,function(a,c){window.localStorage.setItem(a,c);b.push(a)})}c.redirect?window.location=c.redirect:c.loginerror&&(a("#login-message").empty(),a.each(c.loginerror,function(c,b){"object"===typeof b&&a.each(b,function(c,b){a("#login-message").append(b)})}),d.textbox("textbox").focus())}catch(f){a("#error").dialog({title:"Error",modal:!0,width:"90%",height:500,content:data})}}});a("#login-btn-ok").linkbutton({iconCls:"icon-ok",
text:"Login",onClick:function(){b.form("submit")}});a("#login-btn-reset").linkbutton({iconCls:"icon-cancel",text:"Reset",onClick:function(){b.form("clear")}});d.textbox("clear").textbox("textbox").focus()},content:""}}(window.jQuery);