window.yii.easyui=function(e){var m,k,n=e(".main-mask"),v=e("#global-error"),l,u=function(a,b,c,d){k.tabs({fit:!0,border:!1,onSelect:function(c,d){p(c,d,a,b)},onUnselect:function(a,b){},onAdd:function(c,d){m.children[0].children[2].children[0].children[d].children[0].onmousedown=function(){q(this,c,d,a,b);return!1};r();t()},onLoad:function(a){t()},onClose:function(a,b){r()}});yii.easyui.tabOptions&&yii.easyui.tabOptions.title?(yii.easyui.createTab(yii.easyui.tabOptions,yii.easyui.selectedNav),yii.easyui.hideMainMask(),
delete yii.easyui.tabOptions):(c=c(yii.easyui.selectedNav),void 0!==c&&c?d(c):(yii.easyui.hideMainMask(),e.messager.alert("Error","Navigation not found","error")));return!0},q=function(a,b,c,d,e){if(!a.parentElement.classList.contains("tabs-selected")){for(var g=a.parentElement.parentElement.children,f=0;f<g.length;f++)g[f].classList.contains("tabs-selected")&&g[f].classList.remove("tabs-selected");a.parentElement.classList.add("tabs-selected");for(f=a=0;f<g.length;f++)g[f].classList.contains("tabs-selected")&&
(a=f);var h=g[0].parentElement.parentElement.parentElement.nextSibling.children;for(f=0;f<g.length;f++)h[f].hidden||(h[f].style.display="none");h[a].style.display="block";p(b,c,d,e)}},t=function(){void 0!==yii.easyui.tabInit&&"function"===typeof yii.easyui.tabInit&&(yii.easyui.tabInit(),yii.easyui.tabInit=function(){})},p=function(a,b,c,d){b=(k.tabs("getTab",b)||k.tabs("getTab",a)).panel("options");b.href?window.history.replaceState("",a,decodeURIComponent(b.href)):b.data&&b.data.url&&window.history.replaceState("",
a,decodeURIComponent(b.data.url));document.title=a;d(c(b.data.nav))},r=function(){var a=k.find(".tabs-header .tabs li"),b=e(a[0]),c=b.find(".tabs-close"),d=b.find(".tabs-title");b=b.find(".tabs-p-tool");1<a.length?(c.show(),d.css("padding-right","20px").addClass("tabs-closable"),b.attr("style","")):(c.hide(),d.css("padding-right","9px").removeClass("tabs-closable"),b.css("right","5px"));return!0},w=function(){l.tree({lines:!0,data:yii.easyui.navItem,onClick:function(a){if(a.attributes&&a.attributes.url){yii.easyui.showMainMask();
var b={title:a.attributes.title||a.text,href:a.attributes.url,iconCls:a.iconCls};"function"===typeof a.attributes.params?b.queryParams=a.attributes.params():"object"===typeof a.attributes.params&&(b.queryParams=a.attributes.params);yii.easyui.createTab(b,a.id)}}});u(function(a){return l.tree("find",a)},function(a){a&&l.tree("select",a.target)},function(a){return l.tree("find",a)},function(a){var b={title:a.attributes.title||a.text,iconCls:a.iconCls};yii.easyui.tabOptions&&yii.easyui.tabOptions.content?
(b.content=yii.easyui.tabOptions.content,void 0===b.data&&(b.data={}),b.data.url=a.attributes.url,yii.easyui.hideMainMask()):b.href=a.attributes.url;yii.easyui.createTab(b,a.id)})},x=function(){l.accordion({border:!1,fit:!0});var a=function(b,c,d){var g="";(d=d||"")&&(d+=" - ");b.title=c;b.children?e.each(b.children,function(e,f){f.children?g+=a(f,c,d+f.text):(g+='<a data-accordion="'+b.title+'" id="'+f.id+'" data-icon="'+f.iconCls+'" data-url="'+f.attributes.url+'" data-tabtitle="'+(f.attributes.title||
f.text),f.attributes.params&&(g+='" data-params="'+f.attributes.params),g+='" class="nav-btn">'+d+f.text+"</a>")}):g+='<a data-accordion="'+b.title+'" id="'+b.id+'" data-icon="'+b.iconCls+'" data-url="'+b.attributes.url+'" data-tabtitle="'+(b.attributes.title||b.text)+'" class="nav-btn">'+b.text+"</a>";return g};e.each(yii.easyui.navItem,function(b,c){if(void 0===c.visible||c.visible)c.content=a(c,c.text),void 0===c.children&&delete c.id,l.accordion("add",c)});e.each(e(".nav-btn"),function(a,c){e(c).linkbutton({toggle:!0,
group:"g1",iconCls:c.dataset.icon,onClick:function(){yii.easyui.showMainMask();var a={title:c.dataset.tabtitle,href:c.dataset.url,iconCls:c.dataset.icon};c.dataset.params&&eval("params = "+c.dataset.params);yii.easyui.createTab(a,c.id)}})});u(function(a){return document.getElementById(a)},function(a){void 0!==a&&a&&!a.classList.contains("l-btn-selected")&&(l.find(".l-btn-selected").removeClass("l-btn-selected"),a.classList.add("l-btn-selected"),l.accordion("select",a.dataset.accordion))},function(a){return document.getElementById(a)},
function(a){var b={title:a.dataset.tabtitle,iconCls:a.dataset.icon};yii.easyui.tabOptions&&yii.easyui.tabOptions.content?(b.content=yii.easyui.tabOptions.content,void 0===b.data&&(b.data={}),b.data.url=a.dataset.url,yii.easyui.hideMainMask()):b.href=a.dataset.url;yii.easyui.createTab(b,yii.easyui.selectedNav)})},y=function(){var a=e("#north-user-menu");a.menu({});var b={};e.each(yii.easyui.northUserMenu,function(c,d){if(void 0!==d.parent)if(void 0===b[d.parent]&&(b[d.parent]=a.menu("findItem",d.parent)),
b[d.parent])d.parent=b[d.parent].target;else return!1;a.menu("appendItem",d)});e("#north-user-menu-btn").menubutton({text:yii.easyui.username,iconCls:"icon-user",menu:a})},h={};return{isActive:!1,westContent:"",northContent:"",centerContent:"",southContent:"",reference:{},init:function(){window.onbeforeunload=function(a){yii.easyui.showMainMask()};e("body").layout({fit:!0,border:!1}).layout("add",{region:"north",content:yii.easyui.northContent,collapsible:!1,border:!1,height:40}).layout("add",{title:yii.easyui.westTitle,
region:"west",iconCls:yii.easyui.westIcon,split:!0,width:200,content:yii.easyui.westContent,hideCollapsedContent:!1,onCollapse:function(){yii.easyui.cookie.set("west-collapsed",1)},onExpand:function(){yii.easyui.cookie.set("west-collapsed",0)}}).layout("add",{region:"south",content:yii.easyui.southContent,border:!1}).layout("add",{region:"center",content:yii.easyui.centerContent});delete yii.easyui.northContent;delete yii.easyui.westContent;delete yii.easyui.southContent;delete yii.easyui.centerContent;
~~yii.easyui.cookie.get("west-collapsed")&&e("body").layout("collapse","west");y();l=e("#navigation");m=document.getElementById("maintab");k=e(m);"tree"===yii.easyui.sidebarPlugin?w():x();delete yii.easyui.selectedNav;void 0!==yii.easyui.errorName&&e.messager.alert(yii.easyui.errorName,yii.easyui.errorMessage,"error");delete yii.easyui.errorName;delete yii.easyui.errorMessage},getTabHeader:function(a){for(var b=m.children[0].children[2].children[0].children,c=0;c<b.length;c++)if(b[c].children[0].children[0].innerText===
a)return b[c];return null},createTab:function(a,b){var c=yii.easyui.getTabHeader(a.title);c?(q(c.children[0],a.title,null,function(){return!1},function(){return!1}),yii.easyui.hideMainMask()):(void 0===a.data&&(a.data={}),a.closable=!0,a.data.nav=b,a.onLoadError=function(a){var b=k.tabs("getSelected");if(0===a.readyState)yii.easyui.hideMainMask(),e.messager.confirm("Error","Connection error, retry now?",function(a){a?(yii.easyui.showMainMask(),b.panel("refresh")):(a=b.panel("options"),a.content="Connection error",
a.data.url=a.href,delete a.href,k.tabs("update",{tab:b,options:a}))});else{var c=b.panel("options");c.content=a.responseText;c.data.url=c.href;delete c.href;k.tabs("update",{tab:b,options:c});yii.easyui.hideMainMask()}},void 0===a.tools&&(a.tools=[{iconCls:"icon-mini-refresh",handler:function(){if(this.parentElement.parentElement.classList.contains("tabs-selected")){var a=k.tabs("getSelected"),b=a.panel("options");b.href?a.panel("refresh"):a.panel("refresh",b.data.url)}}}]),k.tabs("add",a))},maintabEl:function(){return m},
maintab:function(){return k},ajaxAuthToken:function(a){a=a||{};a["access-token"]=window.localStorage.getItem("token");return a},ajaxError:function(a,b){var c={cancel:"Close",ok:"Try Again",fn:b};0===a.readyState?(c.title="Connection Error",c.msg="Connection is refused"):"object"===typeof a.responseJSON?(c.title=a.responseJSON.name,c.msg=a.responseJSON.message+" file: "+a.responseJSON.file+" line: "+a.responseJSON.line):(c.title=a.statusText+" (#"+a.status+")",c.msg=a.responseText);e.messager.confirm(c)},
showError:function(a){a=void 0!==a.responseText?a.responseText:a;if("object"===typeof a){var b=[];e.each(a,function(a,d){b.push(d)});a=b.join(", ")}v.dialog({title:"Error",modal:!0,minWidth:300,minHeight:200,maxWidth:window.innerWidth-50,maxHeight:window.innerHeight-50,content:a})},dateBoxFormatter:function(a){var b=a.getFullYear(),c=a.getMonth()+1;a=a.getDate();return(10>a?"0"+a:a)+"-"+(10>c?"0"+c:c)+"-"+b},dateBoxParser:function(a){if(!a)return new Date;var b=a.split("-");a=parseInt(b[0],10);var c=
parseInt(b[1],10);b=parseInt(b[2],10);return isNaN(a)||isNaN(c)||isNaN(b)?new Date:new Date(b,c-1,a)},formOptionsOnCreateAjaxDialogForm:{},createAjaxDialogForm:function(a,b,c,d){d=d||{};yii.easyui.formOptionsOnCreateAjaxDialogForm[b]=d;void 0===h[a]&&(h[a]={});void 0===h[a][b]?(c=e.extend(!0,{title:b,closed:!0,modal:!0,width:500,height:400,buttons:[{iconCls:"icon-cancel",text:"Cancel",handler:function(){h[a][b].dialog("close")}},{iconCls:"icon-disk",text:"Save",handler:function(){}}],onLoad:function(){void 0!==
d&&void 0!==d.loadData&&e("#"+b).form("load",d.loadData)}},c),window.innerHeight-20<c.height&&(c.height=window.innerHeight-20),h[a][b]=e("<div></div>").dialog(c)):(h[a][b].children().form("clear"),void 0!==d&&void 0!==d.loadData&&h[a][b].children().form("load",d.loadData),yii.refreshCsrfToken());h[a][b].dialog("open");return!0},getDialogForm:function(a,b){return void 0!==h[a]&&void 0!==h[a][b]?h[a][b]:e("#blank")},destroyDialogForm:function(a,b){void 0!==h[a]&&void 0!==h[a][b]&&(yii.easyui.getDialogForm(a,
b).dialog("destroy"),delete h[a][b])},deleteHandler:function(a,b,c,d,g){var h=a.datagrid("getChecked");h.length?e.messager.confirm("Delete Confirmation","Are you sure to delete the checked rows?",function(f){if(f){c=c||"id";d=d||"ids";g=g||{};g.doAfterDelete=g.doAfterDelete||function(b){b.success?void 0!==b.list?a.datagrid("loadData",b.list):a.datagrid("reload"):void 0!==b.error?yii.easyui.showError(b.error):e.messager.alert(b.name,b.message,"error")};var k={};f=a.datagrid("options");k.rows=f.pageSize;
k.page=f.pageNumber;k[d]=[];e.each(h,function(a,b){k[d].push(b[c])});void 0!==g.doBeforeDelete&&g.doBeforeDelete(k);e.ajax({url:b,type:"post",dataType:"json",data:k,success:function(a){yii.refreshCsrfToken();g.doAfterDelete(a)}})}}):e.messager.alert("Attention","Must checked the record will be delete","warning")},defaults:{validatebox:{minLength:function(){void 0===e.fn.validatebox.defaults.rules.minLength&&(e.fn.validatebox.defaults.rules.minLength={validator:function(a,b){return a.length>=b[0]},
message:"Please enter at least {0} characters."})},equals:function(){void 0===e.fn.validatebox.defaults.rules.equals&&(e.fn.validatebox.defaults.rules.equals={validator:function(a,b){return a===e(b[0]).val()},message:"Field do not match."})}},pagination:{displayMsg:function(a){a=a||"{from} - {to} of {total}";"reset"===a&&(a="Displaying {from} to {to} of {total} items");e.fn.pagination.defaults.displayMsg=a},last:function(){e.fn.pagination.defaults.last={}}}},defaultDgOptions:{fit:!0,striped:!0,border:!1,
method:"get",rownumbers:!0,pagination:!0,checkOnSelect:!1,selectOnCheck:!1,singleSelect:!0,emptyMsg:"No Records Found",onLoadSuccess:function(a){e(this).datagrid("selectRow",0);yii.easyui.hideMainMask()},onLoadError:function(a){yii.easyui.hideMainMask()}},showMainMask:function(){n.css("display","block")},hideMainMask:function(){n.css("display","none")},cookie:{set:function(a,b,c,d){c=c||1;d=d||"";var e="";c&&(e=new Date,e.setTime(e.getTime()+864E5*c),e="; expires="+e.toGMTString());document.cookie=
a+"="+b+e+"; path=/"+d},get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},"delete":function(a,b){yii.easyui.cookie.set(a,"",-1,b)}}}}(window.jQuery);