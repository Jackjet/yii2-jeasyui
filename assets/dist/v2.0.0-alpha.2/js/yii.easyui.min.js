window.yii.easyui=function(d){var f={},g,l=d(".main-mask"),m=function(a,b,c){var e=[],k=1;d.each(a,function(a,b){k?k=0:e.push(b)});e.length?yii.easyui.doIfReferenceExists(e,b,c):b(c)},q=d("#global-error"),h,p=function(a,b,c,e){g.tabs({fit:!0,border:!1,onSelect:function(c,e){var d=g.tabs("getSelected").panel("options");d.href&&window.history.replaceState("",c,decodeURIComponent(d.href));document.title=c;b(a(d.data.nav))},onAdd:function(){n();yii.easyui.tabInit();yii.easyui.tabInit=function(){}},onLoad:function(a){yii.easyui.tabInit();
yii.easyui.tabInit=function(){}},onClose:function(a,b){n()}});yii.easyui.tabOptions&&yii.easyui.tabOptions.title?(yii.easyui.createTab(yii.easyui.tabOptions,yii.easyui.selectedNav),yii.easyui.hideMainMask(),delete yii.easyui.tabOptions):(c=c(yii.easyui.selectedNav),void 0!==c&&c?e(c):(yii.easyui.hideMainMask(),d.messager.alert("Error","Navigation not found","error")))},n=function(){var a=g.find(".tabs-header .tabs li"),b=d(a[0]),c=b.find(".tabs-close"),e=b.find(".tabs-title");b=b.find(".tabs-p-tool");
1<a.length?(c.show(),e.css("padding-right","20px").addClass("tabs-closable"),b.attr("style","")):(c.hide(),e.css("padding-right","9px").removeClass("tabs-closable"),b.css("right","5px"))},r=function(){h.tree({lines:!0,data:yii.easyui.navItem,onDblClick:function(a){a.attributes&&a.attributes.url&&(yii.easyui.showMainMask(),yii.easyui.createTab({title:a.text,href:a.attributes.url,iconCls:a.iconCls},a.id))}});p(function(a){return h.tree("find",a)},function(a){a&&h.tree("select",a.target)},function(a){return h.tree("find",
a)},function(a){var b={title:a.text,iconCls:a.iconCls};yii.easyui.tabOptions&&yii.easyui.tabOptions.content?(b.content=yii.easyui.tabOptions.content,void 0===b.data&&(b.data={}),b.data.url=a.attributes.url,yii.easyui.hideMainMask()):b.href=a.attributes.url;yii.easyui.createTab(b,a.id)})},t=function(){h.accordion({border:!1,fit:!0});var a=function(a){var b="";a.children?d.each(a.children,function(c,d){b+='<a data-accordion="'+a.title+'" id="'+d.id+'" data-icon="'+d.iconCls+'" data-url="'+d.attributes.url+
'" data-tabtitle="'+d.text+'" class="nav-btn">'+d.text+"</a>"}):b+='<a data-accordion="'+a.title+'" id="'+a.id+'" data-icon="'+a.iconCls+'" data-url="'+a.attributes.url+'" data-tabtitle="'+a.text+'" class="nav-btn">'+a.text+"</a>";return b};d.each(yii.easyui.navItem,function(b,c){if(void 0===c.visible||c.visible)c.title=c.text,c.content=a(c),void 0===c.children&&delete c.id,h.accordion("add",c)});d.each(d(".nav-btn"),function(a,c){d(c).linkbutton({toggle:!0,group:"g1",iconCls:c.dataset.icon,onClick:function(){yii.easyui.showMainMask();
yii.easyui.createTab({title:c.dataset.tabtitle,href:c.dataset.url,iconCls:c.dataset.icon},c.id)}})});p(function(a){return document.getElementById(a)},function(a){void 0!==a&&a&&!a.classList.contains("l-btn-selected")&&(h.find(".l-btn-selected").removeClass("l-btn-selected"),a.classList.add("l-btn-selected"),h.accordion("select",a.dataset.accordion))},function(a){return document.getElementById(a)},function(a){var b={title:a.text,iconCls:a.iconCls};yii.easyui.tabOptions&&yii.easyui.tabOptions.content?
(b.content=yii.easyui.tabOptions.content,void 0===b.data&&(b.data={}),b.data.url=a.dataset.url,yii.easyui.hideMainMask()):b.href=a.dataset.url;yii.easyui.createTab(b,yii.easyui.selectedNav)})},u=function(){var a=d("#north-user-menu");a.menu({});var b={};d.each(yii.easyui.northUserMenu,function(c,e){if(void 0!==e.parent)if(void 0===b[e.parent]&&(b[e.parent]=a.menu("findItem",e.parent)),b[e.parent])e.parent=b[e.parent].target;else return!1;a.menu("appendItem",e)});d("#north-user-menu-btn").menubutton({text:yii.easyui.username,
iconCls:"icon-user",menu:a})};return{isActive:!1,westContent:"",northContent:"",centerContent:"",southContent:"",reference:{},init:function(){window.onbeforeunload=function(a){yii.easyui.showMainMask()};d.ajaxSetup({error:function(a,b,c){0===a.readyState?d.messager.confirm("Error","Connection error, retry now?",function(){d.ajax(this)}):yii.easyui.showError(a)}});d("body").layout({fit:!0,border:!1}).layout("add",{region:"north",content:yii.easyui.northContent,collapsible:!1,border:!1,height:40}).layout("add",
{title:yii.easyui.westTitle,region:"west",iconCls:yii.easyui.westIcon,split:!0,width:200,content:yii.easyui.westContent,hideCollapsedContent:!1,onCollapse:function(){yii.easyui.cookie.set("west-collapsed",1)},onExpand:function(){yii.easyui.cookie.set("west-collapsed",0)}}).layout("add",{region:"south",content:yii.easyui.southContent,border:!1}).layout("add",{region:"center",content:yii.easyui.centerContent});delete yii.easyui.northContent;delete yii.easyui.westContent;delete yii.easyui.southContent;
delete yii.easyui.centerContent;~~yii.easyui.cookie.get("west-collapsed")&&d("body").layout("collapse","west");u();h=d("#navigation");g=d("#maintab");"tree"===yii.easyui.sidebarPlugin?r():t();delete yii.easyui.selectedNav;void 0!==yii.easyui.errorName&&d.messager.alert(yii.easyui.errorName,yii.easyui.errorMessage,"error");delete yii.easyui.errorName;delete yii.easyui.errorMessage},createTab:function(a,b){g.tabs("exists",a.title)?(g.tabs("select",a.title),yii.easyui.hideMainMask()):(void 0===a.data&&
(a.data={}),a.closable=!0,a.data.nav=b,a.onLoadError=function(a){var b=g.tabs("getSelected");if(0===a.readyState)yii.easyui.hideMainMask(),d.messager.confirm("Error","Connection error, retry now?",function(){yii.easyui.showMainMask();b.panel("refresh")});else{var c=b.panel("options");c.content=a.responseText;c.data.url=c.href;delete c.href;g.tabs("update",{tab:b,options:c});yii.easyui.hideMainMask()}},void 0===a.tools&&(a.tools=[{iconCls:"icon-mini-refresh",handler:function(){if(d(this).parent().parent()[0].classList.contains("tabs-selected")){var a=
g.tabs("getSelected"),b=a.panel("options");b.href?a.panel("refresh"):a.panel("refresh",b.data.url)}}}]),g.tabs("add",a))},showGridMsg:function(a,b){var c=d(a).datagrid("getPanel").children("div.datagrid-view");b.rows.length?c.children("div.datagrid-empty").remove():d('<div class="datagrid-empty"></div>').html("No Records Found").appendTo(c).css({position:"absolute",left:0,top:50,width:"100%",textAlign:"center"})},showError:function(a){a=void 0!==a.responseText?a.responseText:a;if("object"===typeof a){var b=
[];d.each(a,function(a,d){b.push(d)});a=b.join(", ")}q.dialog({title:"Error",modal:!0,minWidth:300,minHeight:200,maxWidth:window.innerWidth-50,maxHeight:window.innerHeight-50,content:a})},doIfReferenceExists:function(a,b,c){void 0!==a[0]&&void 0===yii.easyui.reference[a[0]]?d.ajax({url:yii.easyui.getReferenceUrl,data:{type:a[0]},dataType:"json",success:function(d){yii.easyui.reference[a[0]]=d;m(a,b,c)}}):m(a,b,c)},dateBoxFormatter:function(a){var b=a.getFullYear(),c=a.getMonth()+1;a=a.getDate();return(10>
a?"0"+a:a)+"-"+(10>c?"0"+c:c)+"-"+b},dateBoxParser:function(a){if(!a)return new Date;var b=a.split("-");a=parseInt(b[0],10);var c=parseInt(b[1],10);b=parseInt(b[2],10);return isNaN(a)||isNaN(c)||isNaN(b)?new Date:new Date(b,c-1,a)},formOptionsOnCreateAjaxDialogForm:{},createAjaxDialogForm:function(a,b,c,e){e=e||{};yii.easyui.formOptionsOnCreateAjaxDialogForm[b]=e;void 0===f[a]&&(f[a]={});void 0===f[a][b]?(c=d.extend(!0,{title:b,closed:!0,modal:!0,width:500,height:400,buttons:[{iconCls:"icon-disk",
text:"Save",handler:function(){}},{iconCls:"icon-cancel",text:"Cancel",handler:function(){f[a][b].dialog("close")}}],onLoad:function(){void 0!==e&&void 0!==e.loadData&&d("#"+b).form("load",e.loadData)}},c),window.innerHeight-20<c.height&&(c.height=window.innerHeight-20),f[a][b]=d("<div></div>").dialog(c)):(f[a][b].children().form("clear"),void 0!==e&&void 0!==e.loadData&&f[a][b].children().form("load",e.loadData),yii.refreshCsrfToken());f[a][b].dialog("open");return!0},getDialogForm:function(a,b){return void 0!==
f[a]&&void 0!==f[a][b]?f[a][b]:d("#blank")},destroyDialogForm:function(a,b){void 0!==f[a]&&void 0!==f[a][b]&&(yii.easyui.getDialogForm(a,b).dialog("destroy"),delete f[a][b])},deleteHandler:function(a,b,c,e,k){var f=a.datagrid("getChecked");f.length?d.messager.confirm("Delete Confirmation","Are you sure to delete the checked rows?",function(g){if(g){c=c||"id";e=e||"ids";k=k||{};k.doAfterDelete=k.doAfterDelete||function(b){b.success?void 0!==b.list?a.datagrid("loadData",b.list):a.datagrid("reload"):
void 0!==b.error?yii.easyui.showError(b.error):d.messager.alert(b.name,b.message,"error")};var h={};g=a.datagrid("options");h.rows=g.pageSize;h.page=g.pageNumber;h[e]=[];d.each(f,function(a,b){h[e].push(b[c])});void 0!==k.doBeforeDelete&&k.doBeforeDelete(h);d.ajax({url:b,type:"post",dataType:"json",data:h,success:function(a){yii.refreshCsrfToken();k.doAfterDelete(a)}})}}):d.messager.alert("Attention","Must checked the record will be delete","warning")},defaults:{validatebox:{minLength:function(){void 0===
d.fn.validatebox.defaults.rules.minLength&&(d.fn.validatebox.defaults.rules.minLength={validator:function(a,b){return a.length>=b[0]},message:"Please enter at least {0} characters."})},equals:function(){void 0===d.fn.validatebox.defaults.rules.equals&&(d.fn.validatebox.defaults.rules.equals={validator:function(a,b){return a===d(b[0]).val()},message:"Field do not match."})}},pagination:{displayMsg:function(a){a=a||"{from} - {to} of {total}";"reset"===a&&(a="Displaying {from} to {to} of {total} items");
d.fn.pagination.defaults.displayMsg=a},last:function(){d.fn.pagination.defaults.last={}}}},getMainTab:function(){return g},defaultDgOptions:{fit:!0,striped:!0,border:!1,method:"get",rownumbers:!0,pagination:!0,checkOnSelect:!1,selectOnCheck:!1,singleSelect:!0,onLoadSuccess:function(a){yii.easyui.showGridMsg(this,a);d(this).datagrid("selectRow",0);yii.easyui.hideMainMask()},onLoadError:function(a){yii.easyui.showError(a);yii.easyui.hideMainMask()}},showMainMask:function(){l.css("display","block")},
hideMainMask:function(){l.css("display","none")},cookie:{set:function(a,b,c,d){c=c||1;d=d||"";var e="";c&&(e=new Date,e.setTime(e.getTime()+864E5*c),e="; expires="+e.toGMTString());document.cookie=a+"="+b+e+"; path=/"+d},get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},"delete":function(a,b){yii.easyui.cookie.set(a,"",-1,b)}}}}(window.jQuery);