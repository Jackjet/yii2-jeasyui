window.yii.easyuiLogin=function(b){return{isActive:!1,init:function(){window.localStorage.removeItem("token");b("#login-dialog").dialog({title:yii.easyuiLogin.dialogTitle,width:yii.easyuiLogin.dialogWidth,height:yii.easyuiLogin.dialogHeight,content:yii.easyuiLogin.content,closable:!1,minimizable:!1,maximizable:!1,collapsible:!1,draggable:!1,resizable:!1,iconCls:"icon-lock",toolbar:yii.easyuiLogin.header,buttons:"#login-btn"});var d=b(yii.easyuiLogin.usernameSelector),e=b("#loginform-password"),c=
b("#login-form");d.textbox({prompt:"Username",required:1,width:yii.easyuiLogin.textboxWidth}).textbox("textbox").bind("keydown",function(a){13===a.keyCode&&(d.textbox("setValue",b(this).val()),c.form("submit"));a.stopPropagation()});e.passwordbox({prompt:"Password",required:1,width:yii.easyuiLogin.textboxWidth}).passwordbox("textbox").bind("keydown",function(a){13===a.keyCode&&(e.passwordbox("setValue",b(this).val()),c.form("submit"));a.stopPropagation()});c.form({url:yii.easyuiLogin.url,novalidate:!0,
onSubmit:function(){b(this).form("enableValidation");if(!b(this).form("validate"))return!1},success:function(a){try{a=eval("("+a+")"),"undefined"!==typeof a.redirect?(window.localStorage.setItem("token",a.token),window.location=a.redirect):"undefined"!==typeof a.loginerror&&(b("#login-message").empty(),b.each(a.loginerror,function(a,c){"object"===typeof c&&b.each(c,function(a,c){b("#login-message").append(c)})}),d.textbox("textbox").focus())}catch(f){b("#error").dialog({title:"Error",modal:!0,width:"90%",
height:500,content:a})}}});b("#login-btn-ok").linkbutton({iconCls:"icon-ok",text:"Login",onClick:function(){c.form("submit")}});b("#login-btn-reset").linkbutton({iconCls:"icon-cancel",text:"Reset",onClick:function(){c.form("clear")}});d.textbox("clear").textbox("textbox").focus()},content:""}}(window.jQuery);