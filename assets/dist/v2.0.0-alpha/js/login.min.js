/**
 * create by sheillendra 2014 - 2017
 * v2.0.0-beta
 */
yii.login=function(a){return{isActive:!1,init:function(){using("dialog form textbox passwordbox linkbutton messager".split(" "),function(){a("#login-dialog").dialog({title:yii.login.dialogTitle,width:yii.login.dialogWidth,height:yii.login.dialogHeight,content:yii.login.content,closable:!1,minimizable:!1,maximizable:!1,collapsible:!1,draggable:!1,resizable:!1,iconCls:"icon-lock",toolbar:yii.login.header,buttons:"#login-btn"});var d=a(yii.login.usernameSelector),e=a("#loginform-password"),c=a("#login-form");
d.textbox({prompt:"Username",required:1,width:yii.login.textboxWidth}).textbox("textbox").bind("keydown",function(b){13===b.keyCode&&(d.textbox("setValue",a(this).val()),c.form("submit"));b.stopPropagation()});e.passwordbox({prompt:"Password",required:1,width:yii.login.textboxWidth}).passwordbox("textbox").bind("keydown",function(b){13===b.keyCode&&(e.passwordbox("setValue",a(this).val()),c.form("submit"));b.stopPropagation()});c.form({url:yii.login.url,novalidate:!0,onSubmit:function(){a(this).form("enableValidation");
if(!a(this).form("validate"))return!1},success:function(b){try{b=eval("("+b+")"),"undefined"!==typeof b.redirect?window.location=b.redirect:"undefined"!==typeof b.loginerror&&(a("#login-message").empty(),a.each(b.loginerror,function(b,c){"object"===typeof c&&a.each(c,function(b,c){a("#login-message").append(c)})}),d.textbox("textbox").focus())}catch(f){a("#error").dialog({title:"Error",modal:!0,width:"90%",height:500,content:b})}}});a("#login-btn-ok").linkbutton({iconCls:"icon-ok",text:"Login",onClick:function(){c.form("submit")}});
a("#login-btn-reset").linkbutton({iconCls:"icon-cancel",text:"Reset",onClick:function(){c.form("clear")}});d.textbox("clear").textbox("textbox").focus();a(document).on("click","#login-signup-btn",function(b){if(document.getElementById("signup-dialog")){var c=a("#signup-dialog");"none"===c.dialog("window").css("display")&&c.dialog("open")}else a.ajax({url:yii.login.signupUrl,success:function(b){a("body").append(b);yii.signup.init()}});b.stopImmediatePropagation()})})},content:""}}(jQuery);