var yii=yii||{};
yii.easyui=function(c){var h={},g,m=c(".main-mask"),n=function(a,b,e){var d=[],k=1;c.each(a,function(a,b){k?k=0:d.push(b)});d.length?yii.easyui.doIfReferenceExists(d,b,e):b(e)},p=c("#global-error"),l,f,q=function(){l.tree({lines:!0,data:yii.easyui.navItem,onDblClick:function(a){a.attributes&&a.attributes.url&&(yii.easyui.showMainMask(),yii.easyui.createTab(a.text,a.attributes.url,a.iconCls,a.id))}});g.tabs({fit:!0,border:!1,onSelect:function(a,b){var e=g.tabs("getSelected").panel("options"),d=l.tree("find",
e.data.nav);window.history.pushState("","",e.data.url);document.title=a;d&&l.tree("select",d.target)},onLoad:function(a){try{var b=eval("("+a.text()+")");g.tabs("close",a.panel("options").title);yii.easyui.hideMainMask();c.messager.alert(b.name,b.message,"error")}catch(e){}}});yii.easyui.tabOptions?(yii.easyui.createTab(yii.easyui.tabOptions.tabtitle,yii.easyui.tabOptions.url,yii.easyui.tabOptions.icon,yii.easyui.selectedNav),delete yii.easyui.tabOptions):(f=l.tree("find",yii.easyui.selectedNav),
"undefined"!==typeof f&&f?yii.easyui.createTab(f.text,f.attributes.url,f.iconCls,f.id):(yii.easyui.hideMainMask(),c.messager.alert("Error","Navigation not found","error")))},r=function(){l.accordion({border:!1,fit:!0});c.each(yii.easyui.navItem,function(a,b){("undefined"===typeof b.visible||b.visible)&&l.accordion("add",b)});c.each(c(".nav-btn"),function(a,b){c(b).linkbutton({toggle:!0,group:"g1",iconCls:b.dataset.icon,onClick:function(){yii.easyui.showMainMask();yii.easyui.createTab(b.dataset.tabtitle,
b.dataset.url,b.dataset.icon,b.id)}})});g.tabs({fit:!0,border:!1,onSelect:function(a,b){var e=g.tabs("getSelected").panel("options"),d=document.getElementById(e.data.nav);window.history.pushState("","",e.data.url);document.title=a;"undefined"!==typeof d&&d&&!d.classList.contains("l-btn-selected")&&(l.find(".l-btn-selected").removeClass("l-btn-selected"),d.classList.add("l-btn-selected"),l.accordion("select",d.dataset.accordion))},onLoad:function(a){try{var b=eval("("+a.text()+")");g.tabs("close",
a.panel("options").title);yii.easyui.hideMainMask();c.messager.alert(b.name,b.message,"error")}catch(e){}}});"undefined"!==typeof yii.easyui.tabOptions?(yii.easyui.createTab(yii.easyui.tabOptions.tabtitle,yii.easyui.tabOptions.url,yii.easyui.tabOptions.icon,yii.easyui.selectedNav),delete yii.easyui.tabOptions):(f=document.getElementById(yii.easyui.selectedNav),"undefined"!==typeof f&&f?yii.easyui.createTab(f.dataset.tabtitle,f.dataset.url,f.dataset.icon,yii.easyui.selectedNav):(yii.easyui.hideMainMask(),
c.messager.alert("Error","Navigation not found","error")))};return{isActive:!1,westContent:"",northContent:"",centerContent:"",southContent:"",reference:{},init:function(){c.ajaxSetup({error:function(a){yii.easyui.showError(a)}});c("body").layout({fit:!0,border:!1}).layout("add",{region:"north",content:yii.easyui.northContent,collapsible:!1,height:40}).layout("add",{title:"Navigation",region:"west",iconCls:"icon-compass",split:!0,width:200,content:yii.easyui.westContent,hideCollapsedContent:!1,onCollapse:function(){yii.easyui.cookie.set("west-collapsed",
1)},onExpand:function(){yii.easyui.cookie.set("west-collapsed",0)}}).layout("add",{region:"south",content:yii.easyui.southContent}).layout("add",{region:"center",content:yii.easyui.centerContent});delete yii.easyui.northContent;delete yii.easyui.westContent;delete yii.easyui.southContent;delete yii.easyui.centerContent;var a=~~yii.easyui.cookie.get("west-collapsed"),b=c("#north-user-menu");l=c("#navigation");g=c("#maintab");a&&c("body").layout("collapse","west");b.menu({}).menu("appendItem",{text:"Profile",
iconCls:"icon-profile",onclick:function(a){yii.easyui.createTab("Profile",yii.easyui.profileUrl,"icon-profile","nav-profile");a.stopPropagation()}}).menu("appendItem",{separator:!0}).menu("appendItem",{text:"Logout",iconCls:"icon-door-out",onclick:function(a){yii.handleAction(c('<a href="'+yii.easyui.logoutUrl+'" data-method="post"></a>'));a.stopPropagation()}});c("#north-user-menu-btn").menubutton({text:yii.easyui.username,iconCls:"icon-user",menu:b});"tree"===yii.easyui.sidebarPlugin?q():r();delete yii.easyui.selectedNav;
f=null;"undefined"!==typeof yii.easyui.errors&&c.messager.alert(yii.easyui.errors.name,yii.easyui.errors.message,"error");delete yii.easyui.errors},createTab:function(a,b,e,d){g.tabs("exists",a)?(yii.easyui.hideMainMask(),g.tabs("select",a)):g.tabs("add",{title:a,href:b,closable:!0,iconCls:e,data:{nav:d,url:b}})},showGridMsg:function(a,b){var e=c(a).datagrid("getPanel").children("div.datagrid-view");b.rows.length?e.children("div.datagrid-empty").remove():c('<div class="datagrid-empty"></div>').html("No Records Found").appendTo(e).css({position:"absolute",
left:0,top:50,width:"100%",textAlign:"center"})},showError:function(a){a="undefined"!==typeof a.responseText?a.responseText:a;if("object"===typeof a){var b=[];c.each(a,function(a,d){b.push(d)});a=b.join(", ")}p.dialog({title:"Error",modal:!0,minWidth:300,minHeight:200,maxWidth:window.innerWidth-50,maxHeight:window.innerHeight-50,content:a})},doIfReferenceExists:function(a,b,e){"undefined"!==typeof a[0]&&"undefined"===typeof yii.easyui.reference[a[0]]?c.ajax({url:yii.easyui.getReferenceUrl,data:{type:a[0]},
dataType:"json",success:function(d){yii.easyui.reference[a[0]]=d;n(a,b,e)}}):n(a,b,e)},dateBoxFormatter:function(a){var b=a.getFullYear(),e=a.getMonth()+1;a=a.getDate();return(10>a?"0"+a:a)+"-"+(10>e?"0"+e:e)+"-"+b},dateBoxParser:function(a){if(!a)return new Date;var b=a.split("-");a=parseInt(b[0],10);var e=parseInt(b[1],10);b=parseInt(b[2],10);return isNaN(a)||isNaN(e)||isNaN(b)?new Date:new Date(b,e-1,a)},formOptionsOnCreateAjaxDialogForm:{},createAjaxDialogForm:function(a,b,e,d){d=d||{};yii.easyui.formOptionsOnCreateAjaxDialogForm[b]=
d;"undefined"===typeof h[a]&&(h[a]={});"undefined"===typeof h[a][b]?(e=c.extend(!0,{title:b,closed:!0,modal:!0,width:500,height:400,buttons:[{iconCls:"icon-disk",text:"Save",handler:function(){}},{iconCls:"icon-cancel",text:"Cancel",handler:function(){h[a][b].dialog("close")}}],onLoad:function(){"undefined"!==typeof d&&"undefined"!==typeof d.loadData&&c("#"+b).form("load",d.loadData)}},e),window.innerHeight-20<e.height&&(e.height=window.innerHeight-20),h[a][b]=c("<div></div>").dialog(e)):(h[a][b].children().form("clear"),
"undefined"!==typeof d&&"undefined"!==typeof d.loadData&&h[a][b].children().form("load",d.loadData),yii.refreshCsrfToken());h[a][b].dialog("open");return!0},getDialogForm:function(a,b){return"undefined"!==typeof h[a]&&"undefined"!==typeof h[a][b]?h[a][b]:c("#blank")},destroyDialogForm:function(a,b){"undefined"!==typeof h[a]&&"undefined"!==typeof h[a][b]&&(yii.easyui.getDialogForm(a,b).dialog("destroy"),delete h[a][b])},deleteHandler:function(a,b,e,d,k){var h=a.datagrid("getChecked");h.length?c.messager.confirm("Delete Confirmation",
"Are you sure to delete the checked rows?",function(f){if(f){e=e||"id";d=d||"ids";k=k||{};k.doAfterDelete=k.doAfterDelete||function(b){b.success?"undefined"!==typeof b.list?a.datagrid("loadData",b.list):a.datagrid("reload"):"undefined"!==typeof b.error?yii.easyui.showError(b.error):c.messager.alert(b.name,b.message,"error")};var g={};f=a.datagrid("options");g.rows=f.pageSize;g.page=f.pageNumber;g[d]=[];c.each(h,function(a,b){g[d].push(b[e])});"undefined"!==typeof k.doBeforeDelete&&k.doBeforeDelete(g);
c.ajax({url:b,type:"post",dataType:"json",data:g,success:function(a){yii.refreshCsrfToken();k.doAfterDelete(a)}})}}):c.messager.alert("Attention","Must checked the record will be delete","warning")},defaults:{validatebox:{minLength:function(){"undefined"===typeof c.fn.validatebox.defaults.rules.minLength&&(c.fn.validatebox.defaults.rules.minLength={validator:function(a,b){return a.length>=b[0]},message:"Please enter at least {0} characters."})},equals:function(){"undefined"===typeof c.fn.validatebox.defaults.rules.equals&&
(c.fn.validatebox.defaults.rules.equals={validator:function(a,b){return a===c(b[0]).val()},message:"Field do not match."})}},pagination:{displayMsg:function(a){a=a||"{from} - {to} of {total}";"reset"===a&&(a="Displaying {from} to {to} of {total} items");c.fn.pagination.defaults.displayMsg=a},last:function(){c.fn.pagination.defaults.last={}}}},getMainTab:function(){return g},defaultDgOptions:{fit:!0,striped:!0,border:!1,method:"get",rownumbers:!0,pagination:!0,checkOnSelect:!1,selectOnCheck:!1,singleSelect:!0,
onLoadSuccess:function(a){yii.easyui.showGridMsg(this,a);c(this).datagrid("selectRow",0);yii.easyui.hideMainMask()},onLoadError:function(a){yii.easyui.showError(a);yii.easyui.hideMainMask()}},showMainMask:function(){m.css("display","block")},hideMainMask:function(){m.css("display","none")},cookie:{set:function(a,b,e,d){e=e||1;d=d||"";var c="";e&&(c=new Date,c.setTime(c.getTime()+864E5*e),c="; expires="+c.toGMTString());document.cookie=a+"="+b+c+"; path=/"+d},get:function(a){a+="=";for(var b=document.cookie.split(";"),
c=0;c<b.length;c++){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return d.substring(a.length,d.length)}return null},"delete":function(a,b){yii.easyui.cookie.set(a,"",-1,b)}}}}(jQuery);